# Session 49 — 2026-02-25

## Context
- **Phase**: Phase 3: Monitoring Runs R/S/T — Experimental Matrix for L3+ Fix
- **Prior**: S48 implemented three-pronged fix + reward rebalancing. Run Q killed (L4 collapse confirmed survival_bonus problem). Run R launched with survival_bonus=0.0.

## Objectives
- [x] Kill Run Q (confirmed L4 collapse, survival_bonus=1.0 diagnosed)
- [x] Monitor Run R progress through L1→L2→L3
- [x] Launch Run S (20x20 arena, min_escape_rate=0.15)
- [x] Launch Run T (10x10 arena, min_escape_rate=0.15) — controlled comparison with Run R
- [x] Update docs and session log

## Work Done

### Run Q Killed
- PID 399681 terminated — L4 collapse confirmed (SR_E=0.00 at S21-S22)
- Root cause: survival_bonus=1.0 makes visible=0.0 (no flee signal)
- Valuable data extracted: three-pronged fix validated L1-L3, L4 collapsed

### Run R Monitoring
Run R (PID 543881) with survival_bonus=0.0, pursuer_v_max=1.0, min_escape_rate=0.05:

| Phase | Role | SR_P | SR_E | NE Gap | Level | Note |
|-------|------|------|------|--------|-------|------|
| S0 | Cold-start | 0.25 | 0.75 | — | 1 | |
| S1 | Pursuer | 0.44 | 0.56 | 0.12 | 1 | |
| S2 | Evader | 0.33 | 0.67 | 0.34 | 1 | |
| S3 | Pursuer | 0.22 | 0.78 | 0.56 | 1 | |
| S4 | Evader | 0.18 | 0.82 | 0.64 | 1 | |
| S5 | Pursuer | 0.71 | 0.29 | 0.42 | 1→2 | Advanced after 5 phases |
| S6 | Evader | 0.63 | 0.37 | 0.26 | 2 | |
| S7 | Pursuer | 0.79 | 0.21 | 0.58 | 2 | Blocked: phases 2/4 |
| S8 | Evader | 0.87 | 0.13 | 0.74 | 2 | Blocked: phases 3/4 |
| S9 | Pursuer | 0.93 | 0.07 | 0.86 | 2→3 | Advanced with weak evader (7%) |
| S10 | Evader (900k) | 0.95 | 0.05 | 0.90 | 3 | 3x steps, barely improved |
| S11 | Pursuer | — | — | — | 3 | Health rollback triggered (98% capture) |

**Key finding**: min_escape_rate=0.05 is too low — evader entered L3 at 7% and couldn't recover despite 900k steps. Health monitor triggered rollback at 98% capture domination.

### Run S Launched
PID 600595, 20x20 arena, min_escape_rate=0.15, seed=44.
- Cold-start: escape_rate=0.78 (healthy)
- S1 in progress (slower due to 1200-step episodes in 20x20 arena)

### Run T Launched
PID 657508, 10x10 arena, min_escape_rate=0.15, seed=45.
- Direct controlled comparison with Run R (only variable: gate threshold)
- Cold-start in progress

### Experimental Matrix Design

| Run | Arena | Gate | Seed | Purpose |
|-----|-------|------|------|---------|
| R | 10x10 | 0.05 | 43 | Negative control (weak gate) |
| T | 10x10 | 0.15 | 45 | Direct comparison (strong gate, same arena) |
| S | 20x20 | 0.15 | 44 | Arena size effect |

All runs share: survival_bonus=0.0, pursuer_v_max=1.0, timeout_penalty=-100, evader_multiplier=3.0, min_phases_per_level=4, w_obs_approach=50.0, curriculum, opponent_pool=5, prep_steps=100, fixed_speed.

### Analysis: Should Pursuer Training Pause When Evader is Weak?
Considered freezing pursuer when escape_rate < min_escape_rate. Rejected because:
1. Breaks co-evolution — evader overfits to static opponent
2. Self-play oscillation is normal (L1 showed recovery)
3. Literature doesn't support freezing in competitive self-play
4. The min_escape_rate gate already prevents premature advancement

## Files Changed
| File | Action | Description |
|------|--------|-------------|
| `docs/worklogs/2026-02-25_S49.md` | Created | Session worklog |
| `docs/workflow_tracker.md` | Modified | Added S49 entry |

## Decisions Made
| Decision | Rationale |
|----------|-----------|
| Keep Run R running despite L3 collapse | Useful as negative control; regression data validates mechanism; costs ~3% GPU |
| Launch Run T (10x10, gate=0.15) | Controlled comparison with Run R — only variable is gate threshold |
| Launch Run S (20x20, gate=0.15) | Tests arena size effect on evader survival |
| Don't freeze pursuer when evader is weak | Breaks co-evolution; self-play oscillation is normal; gate handles it |
| min_escape_rate=0.05 is too low | Run R proved evader enters L3 too weak at 7% and can't recover |

## Issues & Blockers
| Issue | Resolution |
|-------|------------|
| Run R evader entered L3 at 7% escape rate | min_escape_rate=0.05 gate too permissive; Run T tests 0.15 |
| Run R health monitor triggered at S11 (98% capture) | Rollback worked correctly; confirms evader collapse at L3 |
| Run S slow (20x20, 1200-step episodes) | Expected; larger arena needs more steps per episode |

## Next Steps
- [ ] Monitor Run R — will regression trigger? (escape needs < 0.02 for 3 phases)
- [ ] Monitor Run T — key test: does 0.15 gate produce a stronger evader at L3?
- [ ] Monitor Run S — does 20x20 arena help evader survival?
- [ ] If Run T succeeds at L3: min_escape_rate=0.15 is the right threshold
- [ ] If Run T also fails at L3: need deeper fix (Option K rewards, or extend evader_multiplier to all levels)

## Metrics
- Runs active: 3 (R, S, T)
- GPU utilization: ~9% memory, ~20% compute (3 runs)
- Run Q killed (confirmed L4 collapse)
